<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Mobile Checkup System</title>
    <script src="https://apis.google.com/js/api.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.5.22/jsrsasign-all-min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
    <style>
        
     /* ปรับแต่งให้รองรับทุกขนาดหน้าจอ */
body {
    font-family: 'Sarabun', sans-serif;
    max-width: 100%;
    overflow-x: hidden;
}

/* จัดให้ Navbar ทำงานได้ดีขึ้น */
.nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.navbar-toggler {
    border: none;
    background: transparent;
}

/* ปรับขนาดของ card-body ให้พอดีกับอุปกรณ์ */
.card-body {
    min-height: 200px;
    max-height: 200px;
    background-color: lightblue;
}

/* ป้องกันการขยายขนาดของมือถือ */
meta[name="viewport"] {
    content: "width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no";
}

/* ปรับขนาดของ modal ให้เหมาะสมกับมือถือ */
.modal-dialog {
    max-width: 90%;
}

/* ปรับ UI สำหรับอุปกรณ์มือถือ */
@media (max-width: 768px) {
    .nav-container {
        flex-direction: column;
        align-items: center;
    }

    .nav-pills {
        margin-top: 10px;
    }

    .container, .container-fluid {
        max-width: 95%;
    }

    .card-body {
        max-height: 180px;
        min-height: 180px;
    }

    .bd-placeholder-img {
        width: 100%;
        height: auto;
    }

    .col {
        max-width: 100%;
    }

    .container-sm {
        display: block;
        max-width: 100%;
        justify-content: center;
    }
}

    </style>
</head>

<body>
    <div class="container">
        <header
            class="d-flex flex-wrap align-items-center justify-content-between py-3 mb-4 border-bottom nav-container container">
            <a href="/" class="d-flex align-items-center text-decoration-none nav-logo">
                <img src="https://img5.pic.in.th/file/secure-sv1/8c27b7b1c06a8f089.png" alt="Logo" width="40">
                <span class="fs-6 text-dark ms-2">R&B Medical Laboratory</span>
            </a>
            <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-md-flex justify-content-end" id="navbarNav">
                <ul class="nav nav-pills">
                    <li class="nav-item"><a href="index.html" class="nav-link ">หน้าแรก</a></li>
                    <li class="nav-item"><a href="#" class="nav-link active">อัตราค่าบริการ</a></li>
                    <li class="nav-item"><a href="home.html" class="nav-link">ผลตรวจสุขภาพประจำปี</a></li>
                    <li class="nav-item"><a href="contact.html" class="nav-link">ติดต่อเรา</a></li>
                    <li class="nav-item"><a href="login.html" class="nav-link text-secondary">เจ้าหน้าที่</a></li>
                </ul>
            </div>
        </header>
    </div>
    <div class="b-example-divider"></div>
    <div class="container-sm" id="package">
     
           
    </div>
    <div class="modal fade" id="malemodal" tabindex="-1" aria-labelledby="malemodalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="closeModal()" style="cursor: pointer;"></button>
            </div>
            <div class="modal-body">
              <img class="img-thumbnail mt-3" id="mdd-img">
            </div>
            
          </div>
        </div>
    </div>

    <div class="container-lg">
        <div class="b-example-divider"></div>
        <div class="border border-bottom" style="justify-content: space-between;">
            <div class="d-flex gap-2 py-5 border border-bottom" style="justify-content: space-between;">
                <div class="container">
                    <a class="mt-3" href="https://lin.ee/6KvgXbZ"><img src="https://scdn.line-apps.com/n/line_add_friends/btn/th.png" alt="ติดต่อสอบถาม คลิก" height="36"></a>
                
                <div id="datetime" class="text-footer me-5" style="color:darkgreen;"></div>
            </div>
            </div>

        </div>
        <script>
            function updateDateTime() {
                const now = new Date();
                const date = now.toLocaleDateString('th-TH');
                const time = now.toLocaleTimeString('th-TH');
                document.getElementById('datetime').innerHTML = `${date} ${time}`;
            }

            function closeModal() {
                $('#malemodal').css('display', 'none');
            }

            function modalClose() {
                $('#femalemodal').css('display', 'none');
            }

            function openModal() {
                $('#malemodal').css('display', 'block');

            }

            function openFemale() {
                $('#femalemodal').css('display', 'block');

            }


            // เรียกฟังก์ชันทุกวินาทีเพื่ออัปเดตวันที่และเวลา
            setInterval(updateDateTime, 1000);

            // เรียกฟังก์ชันเมื่อโหลดหน้าเว็บ
            updateDateTime();
                let productData = []; // ตัวแปรเก็บข้อมูลสินค้า

function fetchPackage() {
    const scriptURL = "https://script.google.com/macros/s/AKfycby9WPpycC3nXQ_6no9YMML9BhbrWuvnytZSlHBHEMAjasnF152UV_6dr3XJxKyJ9D_Smg/exec";

    fetch(scriptURL)
        .then(response => response.json())
        .then(data => {
            productData = data; // เก็บข้อมูลที่ดึงมา
            let html = "";

            data.forEach((item, i) => {
                html += ` 
                <div class="col me-2 mb-2">
                    <div class="card shadow-sm">
                        <img class="bd-placeholder-img card-img-top" width="100%" height="225" src="${item.mainImage}" alt="Product Image">
                        <div class="card-body">
                            <p class="card-text">${item.description}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="openProductDetail(${i})" style="cursor: pointer;">View</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            });

            document.getElementById("package").innerHTML = html || `<p>Not found product</p>`;
        })
        .catch(error => console.error("เกิดข้อผิดพลาด:", error));
}

// ฟังก์ชันเปิด Modal และใส่รูปภาพที่ตรงกับ index
function openProductDetail(index) {
    document.getElementById("mdd-img").src = productData[index].dataImage;
    let modal = new bootstrap.Modal(document.getElementById('malemodal'));
    modal.show();
}

// ให้รัน fetchPackage() ทันทีเมื่อโหลดหน้าเว็บ
window.onload = fetchPackage;

// ฟังก์ชันปิด Modal
function closeModal() {
    $("#malemodal").css('display', 'none');
}



            window.onload = function () {
                fetchPackage();
            };
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
            crossorigin="anonymous"></script>
</body>

</html>
